@echo off
REM ==========================================================================
REM  Example startup script for the RGB Controller.
REM ==========================================================================

REM --- Configuration ---
SET "MANAGE_SERVER=true"
SET "OPENRGB_EXE=C:\Path\To\Your\OpenRGB\OpenRGB.exe"
SET "PYTHON_EXE=C:\Path\To\Your\Python\python.exe"

REM --- Sanity Checks (unchanged) ---
REM ...

REM --- Execution ---
IF %MANAGE_SERVER%==true (
    ECHO Starting OpenRGB Server in the background...
    START "OpenRGB Server" "%OPENRGB_EXE%" --server
    
    REM --- THE CHANGE IS HERE ---
    REM The 5-second timeout is no longer needed.
    REM The Python script will now poll for the server itself.
    REM timeout /t 5 /nobreak > NUL  <-- DELETE THIS LINE
)

ECHO Starting RGB Controller...
START "" /B "%PYTHON_EXE%" -m src.main

:EOF